<!doctype html>
<html>
<head></head>
<body>
<div id="masterdetail">
    <div class="main-content" data-bind="with: mytable">
        <div class="container page">
            <div class="page-header">
                <div style="float:right;">
                    <button class="btn btn-success" data-bind="click: create">New Entry</button>
                </div>
                <h1>My Table
                    <small></small>
                </h1>

            </div>

            <table class="table table-striped table-bordered table-condensed">
                <thead>
                <tr>
                    <th>ID</th>
                    <th>Name</th>
                    <th>Email</th>
                    <th></th>
                </tr>
                </thead>
                <tbody data-bind="foreach: data">
                <tr>
                    <td data-bind="text: id">99</td>
                    <td data-bind="text: name">User Name</td>
                    <td data-bind="text: email">user@email.com</td>
                    <td><a href="#" data-bind="click: $parent.load"
                           class="btn btn-small btn-info">Editar</a></td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>
    <div data-bind="with: mytable.current">
        <div class="overlay">
            <div class="container page">
                <form class="form-horizontal">

                    <div class="control-group">
                        <label class="control-label" for="mytable-name">Name</label>

                        <div class="controls">
                            <input type="text" class="" id="mytable-name"
                                   data-bind="value: name, disable: id">
                            <p class="help-block">User name (can't be changed).</p>
                        </div>

                    </div>

                    <div class="control-group">
                        <label class="control-label" for="mytable-email">Email</label>

                        <div class="controls">
                            <input type="text" class="" id="mytable-email"
                                   data-bind="value: email">
                            <p class="help-block">User Email Address.</p>
                        </div>

                    </div>

                </form>
                <div class="well">
                    <button class="btn btn-primary" data-bind="click: save">Save</button>
                    <button class="btn"
                            data-bind="click: close">
                        Cancel
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>
<script type="text/javascript" src="masterdetail.js"></script>
<script type="text/javascript">

    jQuery(function($) {
        $('#masterdetail').applyBindings(new MasterDetailModel());

        function MyTableEntry(data) {
            this.id = ko.observable(data.id || null);
            this.name = ko.observable(data.name);
            this.email = ko.observable(data.email);
        }

        function MasterDetailModel() {
            var self = this;
            this.mytable = new MasterDetailController('../objectiveweb/index.php/mytable', MyTableEntry);
            this.mytable.onsave =function() {
                self.mytable.refresh();
                self.mytable.close();
            };
        }
    });



</script>



</body>
</html>